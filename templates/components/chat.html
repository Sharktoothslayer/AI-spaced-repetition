{% extends "base.html" %}

{% block content %}
<div class="tab-content active" id="chat-tab">
    <div class="chat-container">
        <div class="chat-header">
            <h1>AI Italian Tutor</h1>
            <div class="chat-controls">
                <div class="vocabulary-toggle">
                    <label class="toggle-label">
                        <div class="toggle-switch">
                            <input type="checkbox" id="vocabularyToggle">
                            <span class="toggle-slider"></span>
                        </div>
                        <span class="toggle-text">Learning Mode: ON (1-5 new words)</span>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message ai">
                <div class="message-avatar">AI</div>
                <div class="message-content">
                    Ciao! Sono il tuo tutor di italiano. Come posso aiutarti oggi?
                </div>
            </div>
        </div>
        
        <!-- Loading indicator -->
        <div id="aiThinking" class="ai-thinking" style="display: none;">
            <div class="thinking-bubble">
                <div class="thinking-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span class="thinking-text">AI is thinking...</span>
            </div>
        </div>
        
        <div class="chat-input-container">
            <form class="chat-input-form" id="chatForm">
                <input 
                    type="text" 
                    class="chat-input" 
                    id="messageInput" 
                    placeholder="Scrivi il tuo messaggio qui..."
                    autocomplete="off"
                >
                <button type="submit" class="send-button" id="sendButton">
                    Invia
                </button>
            </form>
            
            <!-- New words management buttons -->
            <div class="new-words-controls" style="margin-top: 10px; text-align: center;">
                <button id="addNewWordsBtn" class="btn btn-primary" onclick="addNewWords()" style="display: none;">
                    <span class="btn-text">âž• Add New Words</span>
                    <span class="word-count" id="newWordCount">(0)</span>
                </button>
                <button id="endConversationBtn" class="btn btn-secondary" onclick="endConversation()" style="display: none; margin-left: 10px;">
                    ðŸ”š End Conversation
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
